<div class="box">
  <div class="box-header">
    <h3 class="box-title">Employee Details</h3>
    <div class="pull-right">  
    </div>
  </div>
  <div class="box-body">
   <table class="table table-bordered table-hover table-condensed">     
      <thead>
        <tr>
          <th>Employee Id</th>
          <th>Name</th>
          <th>Age</th>
          <th>Department</th>
          <th>Date Of Joining</th>
          <th>Grade</th>
          <th>Current Designation</th> 
        </tr>
      </thead>
      <tbody>
        <% @employees.each do |a| %>
        <tr>
          <td><%= a.manual_employee_code %></td> 
          <td><%= a.first_name %></td>
          <td><%=  %></td>
          <td><%= a.department.name %></td>
          <td><%= @joining_detail.joining_date %></td>
          <td><%= @joining_detail.employee_grade.name %></td>
          <td><%= @joining_detail.employee_designation.name %></td>
        </tr>
        <% end %>
      </tbody>
    </table>

  <div class="row">
    <div class="col-sm-6">
      <div class="box-header with-border">
        <h3 class="box-title">Previous Experience</h3>
      </div>
      <table class="table table-bordered table-hover table-condensed">
        <thead>
          <tr>
            <th>Previous Company</th>
            <th>Designation</th>
            <th>Previous Exp.(Years)</th>
            <th>CTC</th>
          </tr>
        </thead>
        <tbody>
          <% @experiences.each do |e| %>
            <tr>
              <td><%= e.company_name %></td>
              <td><%= e.designation %></td>
              <td><%= e.no_of_year %></td>
              <td><%= e.ctc %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

  <div class="col-sm-6">
    <div class="box-header with-border">
      <h3 class="box-title">Qualification Details</h3>
    </div>
    <table class="table table-bordered table-hover table-condensed">
      <thead>
        <tr>
          <th>Degree</th>
          <th>Year Of Passing</th>
          <th>Marks</th>
          <th>Qualification</th>
        </tr>
      </thead>
      <tbody>
        <% @qualifications.each do |q| %>
          <tr>
            <td><%= q.degree.name %></td>
            <td><%= q.year.name%> </td>
            <td><%= q.marks %></td>
            <td><%= q.degree_type.name %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="box-header with-border">
  <h3 class="box-title">Goals List</h3>
</div>
  <table class="table table-bordered table-hover table-condensed">
    <thead>
      <tr>
        <th>Goal Perspective</th>
        <th>Goal Weightage</th>
        <th>Goal Measure</th>
        <th>Target/Unit</th>
        <th>Aligned</th>
        <th>Self Comment</th>
        <th>Appraiser Comment</th>
        <th>Appraiser Rating</th>
        <th>Reviewer Comment</th>
      </tr>
    </thead>
    <tbody>
      <% @goal_ratings.each do |goal_rating| %>
        <tr>
          <td><%= goal_rating.goal_perspective.name %></td>
          <td><%= goal_rating.goal_weightage %></td>
          <td><%= goal_rating.goal_measure %></td>
          <td><%= goal_rating.target %></td>
          <td><%= goal_rating.aligned %></td>
          <td><%= goal_rating.appraisee_comment %></td>
          <td><%= goal_rating.appraiser_comment %></td>
          <td><%= goal_rating.appraiser_rating_id %></td>
          <td><%= goal_rating.reviewer_comment %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

<%= bootstrap_form_for(@goal_bunch,url:{action: "final_create",employee_id: @employee.id,goal_bunch_id: @goal_bunch.id}) do |f| %>
<%= hidden_field_tag :final_id, {},value: current_user.employee_id %>

<div class="box-header with-border">
  <h3 class="box-title">Final Comment</h3>
</div>
  <div class="row">
    <div class="col-sm-9">
      <div class="field">
      <%= f.text_field :final_comment,hide_label:true, placeholder: 'Final Comment' %>
      </div>
    </div>
    <div class="col-sm-3">
      <div class="field">
      <%= f.select :final_rating_id,all_rating_type,{hide_label:true, include_blank: 'Select Rating'} %>
      </div>
    </div>
  </div>

    <div class="row">
      <div class="col-sm-3">
        <div class="actions">
          <%= f.submit "Create" , class: "btn btn-primary btn-sm" %>
        </div>
      </div>
    </div>
<% end %>


<div class="box-header with-border">
  <h3 class="box-title">Created Final Comment</h3>
</div>
<%= bootstrap_form_for GoalBunch.new,url:{action:'final_comment_confirm',id: @employee.id} do |f| %>
  <table id="example2" class="table table-bordered table-hover table-condensed">
    <thead>
      <tr>
        <th><input type="checkbox" id="selectAll" value="selectAll"></th>
        <th>Final Comment</th>
        <th>Final Rating</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% @goal_bunches.each do |goal_bunch| %>
        <tr>
          <td>
            <% if goal_bunch.final_confirm == true %>
            <% else %>
            <%= check_box_tag "goal_bunch_ids[]", goal_bunch.id %>
            <% end %>
          </td>
          <td><%= goal_bunch.final_comment %></td>
          <td><%= goal_bunch.final_rating_id %></td>
          <td>
            <% if goal_bunch.final_confirm == true %>
            <small class="label label-info">Confirmed</small>
            <% else %>
            <%= link_to '', final_modal_goal_bunches_path(goal_bunch),class: 'btn btn-xs btn-success fa fa-edit',remote:true %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
   <div class="row">
    <div class="col-sm-3">
      <div class="actions">
        <%= f.submit "Confirm", class: 'btn btn-primary btn-sm' %>
      </div>
    </div>
  </div>
  <% end %>
  </div>
</div>

<div id="myModal" class="modal fade"></div>
<script type="text/javascript">
  $(function () {
    $('#selectAll').click(function() {
      if (this.checked) {
        $(':checkbox').each(function() {
          this.checked = true;                       
        });
      } 
      else {
        $(':checkbox').each(function() {
          this.checked = false;                        
        });
      } 
    });
  });
</script>
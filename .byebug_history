exit
tp @salaryslips = Salaryslip.where(id:  @salaryslip_components)
@salaryslips = Salaryslip.where(id:  @salaryslip_components)
tp @salaryslip_components = SalaryslipComponent.where(salaryslip_id: @salaryslips1,other_component_name: "Advance").pluck(:salaryslip_id) 
@salaryslip_components = SalaryslipComponent.where(salaryslip_id: @salaryslips1,other_component_name: "Advance").pluck(:salaryslip_id)
@salaryslips1 = Salaryslip.where('month = ? and year = ?', @month, @year).where(employee_id: @employees).pluck(:id)
@employees = Employee.where(company_id: @company.to_i,company_location_id: @location.to_i)
@location = params[:food_deduction][:company_location_id]
@location = params[:salaryslip][:company_location_id]
 @company = params[:salaryslip][:company_id]
 @year = params[:salaryslip][:year]
@month = params[:salaryslip][:month]
b = a.advance_date
a.advance_date
a =  @advance_salaries = AdvanceSalary.where("strftime('%Y', advance_date) = ?", date.strftime('%Y')).where(employee_id: @employees).last
 @advance_salaries = AdvanceSalary.where("strftime('%Y', advance_date) = ?", date.strftime('%Y')).where(employee_id: @employees).last
date.strftime("%Y")
 @advance_salaries = AdvanceSalary.where("strftime('%Y', advance_date) = ?", date.strftime('%Y')).where(employee_id: @employees)
"strftime('%Y', advance_date) = ?", date.strftime('%Y')
 @employees = Employee.where(company_id: @company.to_i,company_location_id: @location.to_i).pluck(:id)
date = Date.new(@year.to_i)
exit
date = Date.new(@year.to_i)
 Workingday.months[@month]
@year.to_i
date = Date.new(@year.to_i, Workingday.months[@month])
@location = params[:advance_salary][:company_location_id]
@company = params[:advance_salary][:company_id]
@year = params[:advance_salary][:year]
exit
@year.to_i
@year = params[:advance_salary][:year]
exit
@year = params[:advance_salary][:year]
@year = params[:year]
exit
Employee.where(company_location_id: current_user.company_location_id)
@emp_id = WeekOffMaster.where(day: @day,from: @from.to_date,to: @to.to_date).pluck(:employee_id)
tp WeekOffMaster.where(day: @day,from: @from.to_date,to: @to.to_date)
WeekOffMaster.where(day: @day,from: @from.to_date)
WeekOffMaster.where("day = ? AND from = ? AND to = ?",@day,@from.to_date,@to.to_date)
WeekOffMaster.where(day: @day,from: @from)
WeekOffMaster.where(day: @day,from: @from.to_date,to: @to.to_date)
WeekOffMaster.where(day: @day,from: @from.to_date)
WeekOffMaster.where(day: @day)
@to.to_date
@from
 @day
WeekOffMaster.where(day: @day,from: @from.to_date,to: @to.to_date)
exit
work_data_structure
c
work_data_structure
exit
week_off_day = week_off_day_count(exist)
present_day
week_off_day
hidden_field e.employee_id, 'week_off_day', value: week_off_day
<%= hidden_field e.employee_id, 'week_off_day', value: week_off_day %>
c
EmployeeAttendance.where("strftime('%m/%Y', day) = ? AND employee_id = ?", @date.strftime('%m/%Y'),x).update_all(is_confirm: true)

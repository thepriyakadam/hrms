<%= bootstrap_form_for @salary_component_template,remote:true do |f| %>
		<%= f.hidden_field :salary_component_id, value: @salary_component.id %>
		<%= f.hidden_field :salary_template_id, value: @salary_template.id %>
		<%= f.hidden_field :manual_template_code, value: @salary_template.code %>
		<div class="row">
			<div class="col-sm-2">
				<label>Base</label>
				<%= f.select :base, [['Monthly'],['Annual']],{hide_label:true} %>
			</div>
			<div class="col-sm-2">
				<%= f.select :is_taxable, [['No','false'],['Yes','true']]%>
			</div>
			<div class="col-sm-2">
				<label>Tax(%)</label>
				<%= f.text_field :tax,disabled: true,hide_label: true %>
			</div>

			<div class="col-sm-2">
				<%= f.select :to_be_paid, [['Monthly'],['Annual']] %>
			</div>
			<div class="col-sm-2">
				<%= f.select :is_deducted, [['No','false'],['Yes','true']] %>
			</div>
			
		</div>	
		<div class="row">
			<div class="col-sm-2">
				<label>Depends</label>
				<%= f.select :parent_salary_component_id, parent_salary_component,{prompt: true,hide_label: true} %>
			</div>
			<div class="col-sm-2">
				<label>Factor(%)</label>
				<%= f.text_field :percentage,disabled: true,hide_label: true %>
			</div>
			<div class="col-sm-2">
				<%= f.text_field :max_amount %>
			</div>
			<div class="col-sm-2">
				<%= f.text_field :monthly_amount %>
			</div>
			<div class="col-sm-2">
				<%= f.text_field :annual_amount %>
			</div>
		</div>
		<%= f.button "Create Salary Template", class: "btn btn-primary", data: {disable_with: "<i class='fa fa-circle-o-notch fa-spin'></i> Wait..."} %>
<% end %>

<script type="text/javascript">
	$(function(){

    $('#salary_component_template_is_taxable').on('change', function() {
      enabled_tax_textbox();
    });
    $('#salary_component_template_parent_salary_component_id').on('change', function() {
      enabled_percent_textbox();
    });

    function enabled_tax_textbox(){
    	var is_taxable = ($("#salary_component_template_is_taxable").val());
    	console.log(is_taxable);
    	if(is_taxable == 'true'){
    		$("#salary_component_template_tax").prop('disabled', false);
      }
      else if (is_taxable == 'false'){
      	$("#salary_component_template_tax").val("");
        $("#salary_component_template_tax").prop('disabled', true);
      }
    }

    function enabled_percent_textbox(){
    	var parent_salary_component_id = parseInt($("#salary_component_template_parent_salary_component_id").val());
    	if(isNaN(parent_salary_component_id)){
    		$("#salary_component_template_percentage").val("");
    		$("#salary_component_template_percentage").prop('disabled', true);
      }
      else{
        $("#salary_component_template_percentage").prop('disabled', false);
      }
    }
  });
</script>
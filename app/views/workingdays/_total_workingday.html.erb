
  <div class="box-body">
    <table id="example5" class="table table-bordered table-hover table-condensed">
      <thead>
        <tr><td colspan="26"><center>Working Days : <%= @from %> - <%= @to %></center></td></tr>
        <tr>
          <th>ID</th>
          <th>Employee</th>
          <th>Payable Day</th>
          <th>Present Day</th>
          <th>Absent Day</th>
          <th>Holiday</th>
          <th>Week Off</th>
          <th>OD Day</th>
          <th>Advance Leave</th>
          <th>CL Balance</th>
          <th>EL Balance</th>
          <th>COff Balance</th>
          <th>Advance Balance</th>
          <th>Payable Leave</th>
          <th>Non Payable Leave</th>
          <th>Gatepass</th>
          <th>Calculated Payable Day</th>
          <th>OT Hours</th>
          <th>OD Leave</th>
          <th>OD Day</th>
          <th>Total Leave</th>
          <th>Paid</th>
          <th>Full & Final</th>
          <th>Non Payable Day</th>
          <th>Date</th>
          <th>Confirm</th>
        </tr>
      </thead>

      <tbody>
         <% @workingdays.each do |workingday| %>
          <tr>
            <td><%= workingday.employee.try(:manual_employee_code) %></td>
            <td><%= full_name(workingday.employee) %></td>
            <td>
                <% payable = 0 %>
                <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% payable =  payable + w.payable_day %>
                  <% payable %>
                <% end %>
              <%= payable %>
            </td>
            <td>
              <% present = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% present =  present + w.present_day %>
                  <% present %>
                <% end %>
              <%= present %>
            </td>
            <td>
              <% absent = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% absent =  absent + w.absent_day %>
                  <% absent %>
                <% end %>
              <%= absent %>
            </td>
            <td>
              <% holiday = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% holiday =  holiday + w.holiday_in_month %>
                  <% holiday %>
                <% end %>
              <%= holiday %>
            </td>
            <td>
              <% week_off = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% week_off =  week_off + w.week_off_day %>
                  <% week_off %>
                <% end %>
              <%= week_off %>
            </td>
            <td>
              <% od = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% od =  od + w.od_day %>
                  <% od %>
                <% end %>
              <%= od %>
            </td>
            <td>
              <% advance_leave = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% advance_leave =  advance_leave.to_i + w.advance_leave.to_i %>
                  <% advance_leave %>
                <% end %>
              <%= advance_leave %>
            </td>
            <td>
              <% cl_balance = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% cl_balance =  cl_balance.to_i + w.cl_balance.to_i %>
                  <% cl_balance %>
                <% end %>
              <%= cl_balance %>
            </td>
            <td>
              <% el_balance = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% el_balance =  el_balance.to_i + w.el_balance.to_i %>
                  <% el_balance %>
                <% end %>
              <%= el_balance %>
            </td>
            <td>
              <% c_off_balance = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% c_off_balance =  c_off_balance.to_i + w.coff_balance.to_i %>
                  <% c_off_balance %>
                <% end %>
              <%= c_off_balance %>
            </td>
             <td>
              <% advance_balance = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% advance_balance =  advance_balance.to_i + w.advance_balance.to_i %>
                  <% advance_balance %>
                <% end %>
              <%= advance_balance %>
            </td>
            <td>
              <% pay_leave = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% pay_leave =  pay_leave.to_i + w.pay_leave.to_i %>
                  <% pay_leave %>
                <% end %>
              <%= pay_leave %>
            </td>
            <td>
              <% nonpay_leave = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% nonpay_leave =  nonpay_leave.to_i + w.nonpay_leave.to_i %>
                  <% nonpay_leave %>
                <% end %>
              <%= nonpay_leave %>
            </td>
             <td>
              <% gatepass = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% gatepass =  gatepass.to_i + w.gatepass.to_i %>
                  <% gatepass %>
                <% end %>
              <%= gatepass %>
            </td>
             <td>
              <% calculated_payable_days = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% calculated_payable_days =  calculated_payable_days.to_i + w.calculated_payable_days.to_i %>
                  <% calculated_payable_days %>
                <% end %>
              <%= calculated_payable_days %>
            </td>
             <td>
              <% ot_hours = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% ot_hours =  ot_hours.to_i + w.ot_hours.to_i %>
                  <% ot_hours %>
                <% end %>
              <%= ot_hours %>
            </td>
             <td>
              <% od_leave = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% od_leave =  od_leave.to_i + w.od_leave.to_i %>
                  <% od_leave %>
                <% end %>
              <%= od_leave %>
            </td>
             <td>
              <% od_day = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% od_day =  od_day.to_i + w.od_day.to_i %>
                  <% od_day %>
                <% end %>
              <%= od_day %>
            </td>
            <td>
              <% total_leave = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% total_leave =  total_leave.to_i + w.total_leave.to_i %>
                  <% total_leave %>
                <% end %>
              <%= total_leave %>
            </td>
            <td>
                  <% workingday.paid %>
            </td>
            <td>
            <% workingday.full_and_final %>
            </td>
            <td>
              <% non_payable_day = 0 %>
              <% @workingday = Workingday.where(date: @from..@to,employee_id: workingday.employee_id) %>
                <% @workingday.each do |w| %>
                  <% non_payable_day =  non_payable_day.to_i + w.nonpayable_day.to_i %>
                  <% non_payable_day %>
                <% end %>
              <%= non_payable_day %>
            </td>
            <td><%= workingday.date %></td>

            <td><%= workingday.is_confirm ? "Yes" : "No" %></td>
          </tr>
      <% end %>
      </tbody>
    </table>
      <%= link_to " Excel Report ",show_total_workingday_workingdays_path(:employee => {:from => params[:employee][:from], :to  => params[:employee][:to]}, format: "xls"), class: "btn btn-xl btn-success fa fa-print" %>
      <%= link_to " PDF Report",show_total_workingday_workingdays_path(:employee => {:from => params[:employee][:from],:to => params[:employee][:to]}, format: "pdf"), class: "btn btn-xl btn-info fa fa-print", :target => "_blank" %>
   <!--  <= link_to 'Back', datewise_total_workingday_workingdays_path,class: 'btn btn-default btn-sm fa fa-arrow-left' %> -->
  </div>
</div>


<script type="text/javascript">
$(document).ready(function() {
    $('#example5').DataTable( {
        "lengthMenu": [[10, 25, 50,100, -1], [10, 25, 50,100, "All"]],
        "scrollX": true
    } );
} );
</script>


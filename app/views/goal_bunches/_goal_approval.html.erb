<div class="box box-default">
  <div class="box-header with-border">
    <h3 class="box-title">Goal Rating</h3>
  </div><!-- /.box-header -->
  <div class="box-body">
  <%= bootstrap_form_for GoalBunch.new,url:{action:'appraiser_confirm',id: @employee.id} do |f| %>  
    <table class="table table-bordered table-hover table-condensed">
      <thead>
        <tr>
          <th><input type="checkbox" id="selectAll" value="selectAll"></th>
          <th>Goal perspective</th>
          <th>Goal weightage</th>
          <th>Goal measure</th>
          <th>Target</th>
          <th>Aligned</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <% @goal_ratings.each do |goal_rating| %>
          <tr>
            <td>
            <% if goal_rating.goal_bunch.goal_confirm == true %>
            <% else %>
            <%= check_box_tag "goal_rating_ids[]", goal_rating.goal_bunch_id %>
            <% end %>
            </td>
            <td><%= goal_rating.goal_perspective.name %></td>
            <td><%= goal_rating.goal_weightage %></td>
            <td><%= goal_rating.goal_measure %></td>
            <td><%= goal_rating.target %></td>
            <td><%= goal_rating.aligned %></td>
            <td>
              <% if goal_rating.goal_bunch.goal_confirm == true %>
                <small class="label label-info">Confirmed</small>
              <% else %>
                <%= link_to '', goal_modal_goal_ratings_path(goal_rating),class: 'btn btn-xs btn-success fa fa-edit',remote:true %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

  <div class="row">
    <div class="col-sm-3">
      <div class="actions">
        <%= f.submit "Confirm", class: 'btn btn-primary btn-sm' %>
      </div>
    </div>
  </div>
<% end %>
</div>
</div>
<div id="myModal" class="modal fade"></div>
<script type="text/javascript">
  $(function () {
    $('#selectAll').click(function() {
      if (this.checked) {
        $(':checkbox').each(function() {
          this.checked = true;                       
        });
      } 
      else {
        $(':checkbox').each(function() {
          this.checked = false;                        
        });
      } 
    });
  });
</script>

<div class="box">
  <div class="box-header">
    <h3 class="box-title">Expense Claim Request Confirmation</h3><!--  <= @reporting_masters_travel_requests.reporting_master.employee.try(:first_name) %> <= @reporting_masters_travel_requests.reporting_master.employee.try(:middle_name) %> <= @reporting_masters_travel_requests.reporting_master.employee.try(:last_name) %> -->
  <!--   <= @reporting_masters_travel_requests1.reporting_master.employee.try(:first_name) %> <= @reporting_masters_travel_requests1.reporting_master.employee.try(:middle_name) %> <= @reporting_masters_travel_requests1.reporting_master.employee.try(:last_name) %> -->
</div>
<div class="box-body">
<%= bootstrap_form_for DailyBillDetail.new,url:{action:'approve_request'} do |f| %>
<!--<= bootstrap_form_for DailyBillDetail.new,url:{action:'reject_request'} do |r| %>-->
 <div>
  <%= render 'show_travel_request' %>
</div>
<div>
<%= render 'show_reporting_masters_travel_request' %>
</div>

<table id="example" class="table table-bordered table-hover table-condensed">
  <thead>
    <tr>
      <th><input type="checkbox" id="selectAll" value="selectAll"></th>
      <th>Request ID</th>
      <th>Expense Date</th>
      <th>Place</th>
      <th>Expense Type</th>
      <th>Amount</th>
      <th>Status</th>
      <th>Image</th>
      <th>Document</th>
      <th>Action</th>
    </tr>
  </thead>

  <tbody>
      <% @daily_bill_details.each do |daily_bill_detail| %>
      <tr>
        <td>
        <% if daily_bill_detail.request_status == "Approved" %>
         <% else %>
            <%= check_box_tag "daily_bill_detail_ids[]", daily_bill_detail.id %>
            <% end %>
        </td>
        <td><%= daily_bill_detail.travel_request_id %></td>
        <td><%= daily_bill_detail.expence_date %></td>
        <td><%= daily_bill_detail.e_place %></td>
        <td><%= daily_bill_detail.travel_expence_type.try(:name) %></td>
        <td><%= daily_bill_detail.travel_expence %></td>
        <td>
            <% if daily_bill_detail.request_status == "Approved" %>
            <small class="label label-success">Approved</small>
            <% elsif daily_bill_detail.request_status == "Rejected" %>
            <small class="label label-danger">Rejected</small>
            <% elsif daily_bill_detail.request_status == "Approved & Send Next" %>
            <small class="label label-warning">Approved & Send Next</small>
            <% else %>
            <% end %>
        </td>
        <td>
           <% if daily_bill_detail.passport_photo_file_name == nil %>
           <small class="label label-warning">Not Available</small>
             <% else %>
             <%= link_to '',download_pics_path(id: daily_bill_detail.id),class: 'btn btn-xs fa fa-picture-o' %>
             <% end %>
        </td>
         <td>
           <% if daily_bill_detail.avatar_file_file_name == nil %>
           <small class="label label-warning">Not Available</small>
             <% else %>
             <%= link_to '',download_doc_path(id: daily_bill_detail.id),class: 'btn btn-xs fa fa-download' %>
             <% end %>
        </td>
        <td>

        <% if daily_bill_detail.request_status == "Approved" %>
            <% elsif daily_bill_detail.request_status == nil %>
            <%= link_to 'Comment', comment_modal_daily_bill_details_path(daily_bill_detail_id: daily_bill_detail.id),class: 'btn btn-xs btn-info fa fa-check', remote: true %>
            <% else %>
            <% end %>


        <% if daily_bill_detail.request_status == "Approved" %>
            <% else %>
            <%= link_to 'Approve & Send Next',approve_and_send_next_daily_bill_details_path(daily_bill_detail),class: 'btn btn-xs btn-primary ',data: { confirm: 'Are you sure?' } %>
            <%= link_to 'Approve', approve_request_daily_bill_details_path(daily_bill_detail),class: 'btn btn-xs btn-info',data: { confirm: 'Are you sure?' } %>
             <%= link_to 'Reject', reject_request_daily_bill_details_path(daily_bill_detail),class: 'btn btn-xs btn-danger',data: { confirm: 'Are you sure?' } %>
            <% end %>
            <%= link_to '', daily_bill_detail,class: 'btn btn-sm btn-default fa fa-eye' %>
            <!-- <div id="myModal" class="modal fade"></div>
             <= link_to 'Next', approve_and_send_next_modal_daily_bill_details_path(daily_bill_detail),class: 'btn btn-xs btn-success',remote: true %> -->

        <!--<= link_to 'Edit & Send Next', edit_and_send_next_modal_daily_bill_details_path(daily_bill_detail),class: 'btn btn-sm btn-info fa fa-check', remote: true %>-->

        </td>
      </tr>
      <% end %>
      <tr>
          <th>Total</th>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td><%= @daily_bill_details.sum(:travel_expence) %></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
      </tr>    
  </tbody>
</table>

<div class="row">
  <div class="col-sm-6">
    <div class="actions">
<!--       <= f.submit "Approve Request", class: 'btn btn-info btn-sm',data: { confirm: 'Are you sure?' } %>
 -->      <!--<= link_to 'Approve & Send Next',approve_and_send_next_daily_bill_details_path(@travel_request.id),class: 'btn btn-sm btn-danger fa fa-trash' %>-->
<!--       <= r.submit "Reject Request", class: 'btn btn-danger btn-sm' %>
  -->   </div>
  </div>
</div>
<% end %>
<div>
</div>
</div>
</div>

<script>
$(document).ready(function() {
    $('#example').DataTable();
} );
</script>

<script type="text/javascript">
  $(function () {
    $('#selectAll').click(function() {
      if (this.checked) {
        $(':checkbox').each(function() {
          this.checked = true;                       
        });
      } 
      else {
        $(':checkbox').each(function() {
          this.checked = false;                        
        });
      } 
    });
  });
</script>
<div id="myModal" class="modal fade"></div>
<div id="myModal1" class="modal fade"></div>
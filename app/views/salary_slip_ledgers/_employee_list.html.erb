<div class="ajax-progress"></div>
<% i = 0 %>
<table id="example3" class="table table-bordered table-hover table-condensed">
  <thead>
    <tr>
      <th colspan="6"><center> BASIC DETAILS</center></th>
      <th colspan="8"><center> SALARY DETAILS</center></th>
      <th colspan="8"><center> WORKING DAYS</center></th>
      <th colspan="8"><center> EARNED SALARY</center></th>
      <th colspan="10"><center>DEDUCTION</center></th>
      <th><center> NET </center></th>
      <th><center> SIGN </center></th>
    </tr>

    <tr>
      <th>No</th>
      <th>Code</th>
      <th>Name</th>
      <th>Department</th>
      <th>PF No</th>
      <th>ESIC No</th>
      
      <th>Basic</th>
      <th>DA</th>
      <th>HRA</th>
      <th>Conv</th>
      <th>O.Allow</th>
      <th>S.Allow</th>
      <th>Wsh.Allow</th>
      <th>Total</th>

      <th>CL</th>
      <th>EL</th>
      <th>LWP</th>
      <th>Payable</th>
      <th>PD</th>
      <th>AD</th>
      <th>HD</th>
      <th>WOff</th>

      <th>Basic</th>
      <th>DA</th>
      <th>HRA</th>
      <th>conv</th>
      <th>O.Allow</th>
      <th>S.Allow</th>
      <th>Wsh.Allow</th>
      <th>Gross</th>

      <th>PF</th>
      <th>ESIC</th>
      <th>IT</th>
      <th>PT</th>
      <th>Adv.Sal</th>
      <th>Society</th>
      <th>Food</th>
      <th>Mobile</th>
      <th>Retention</th>
      <th>Total Dedu</th>

      <th>NET</th>
      <th>SING</th>
    </tr>
  </thead>
  <tbody>
    <% @reports.each do |r| %>
      <tr>
        <td><%= i = i+1 %></td>
        <td><%= r.try(:code) %></td>
        <td><%= r.try(:employee_name) %></td>
        <td><%= r.try(:department_name) %></td>
        <td><%= r.try(:pf_no) %></td>
        <td><%= r.try(:esic_no) %></td>

        <td><%= r.try(:actual_basic) %></td>
        <td><%= r.try(:actual_da) %></td>
        <td><%= r.try(:actual_hra) %></td>

        <td><%= r.try(:actual_convenience) %></td>
        <td><%= r.try(:actual_other) %></td>
        <td><%= r.try(:actual_special) %></td>
        <td><%= r.try(:actual_washing) %></td>
        <td><%= r.try(:actual_total) %></td>

        <td><%= r.try(:cl_leave) %></td>
        <td><%= r.try(:el_leave) %></td>

        <td><%= r.try(:lwp_leave) %></td>
        <td><%= r.try(:payable_day) %></td>
        <td><%= r.try(:present_day) %></td>
        <td><%= r.try(:absent_day) %></td>
        <td><%= r.try(:holiday) %></td>
        <td><%= r.try(:weekoff) %></td>

        <td><%= r.try(:earned_basic) %></td>
        <td><%= r.try(:earned_da) %></td>
        <td><%= r.try(:earned_hra) %></td>

        <td><%= r.try(:earned_convenience) %></td>
        <td><%= r.try(:earned_other) %></td>
        <td><%= r.try(:earned_special) %></td>
        <td><%= r.try(:earned_washing) %></td>
        <td><%= r.try(:earned_total) %></td>

        <td><%= r.try(:pf) %></td>
        <td><%= r.try(:esic) %></td>
        <td><%= r.try(:income_tax) %></td>
        <td><%= r.try(:pt) %></td>
        <td><%= r.try(:advance) %></td>
        <td><%= r.try(:society) %></td>

        <td><%= r.try(:food_deduction) %></td>
        <td><%= r.try(:mobile) %></td>
        <td><%= r.try(:retention) %></td>
        <td><%= r.try(:deduction_total) %></td>
        <td><%= r.try(:net_payable) %></td>
        <td><%=  %></td>
      </tr>
    <% end %>

    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>

      <td><%= @sum.actual_basic %></td>
      <td><%= @sum.actual_da %></td>
      <td><%= @sum.actual_hra %></td>
      <td><%= @sum.actual_convenience %></td>
      <td><%= @sum.actual_other %></td>
      <td><%= @sum.actual_special %></td>
      <td><%= @sum.actual_washing %></td>
      <td><%= @sum.actual_total %></td>

      
      <td><%= @sum.cl_leave %></td>
      <td><%= @sum.el_leave %></td>
      <td><%= @sum.lwp_leave %></td>
      <td><%= @sum.payable_day %></td>
      <td><%= @sum.present_day %></td>
      <td><%= @sum.absent_day %></td>
      <td><%= @sum.holiday %></td>
      <td><%= @sum.weekoff %></td>

      <td><%= @sum.earned_basic %></td>
      <td><%= @sum.earned_da %></td>
      <td><%= @sum.earned_hra %></td>
      <td><%= @sum.earned_convenience %></td>
      <td><%= @sum.earned_other %></td>
      <td><%= @sum.earned_special %></td>
      <td><%= @sum.earned_washing %></td>
      <td><%= @sum.earned_total %></td>

      <td><%= @sum.pf %></td>
      <td><%= @sum.esic %></td>
      <td><%= @sum.income_tax %></td>
      <td><%= @sum.pt %></td>
      <td><%= @sum.advance %></td>
      <td><%= @sum.society %></td>
      <td><%= @sum.food_deduction %></td>
      <td><%= @sum.mobile %></td>
      <td><%= @sum.retention %></td>
      <td><%= @sum.deduction_total %></td>

      <td><%= @sum.net_payable %></td>
      <td>SIGN</td>
    </tr>
  </tbody>
</table>
  <div class="col-sm-6">
    <% if action_name == "cost_unit_wise_salary" %>
      <%= link_to " Print Salary Slip ", cost_unit_wise_salary_salary_slip_ledgers_path(bank_id: @bank,year: @year,month: @month, cost_center: @category,format: "pdf"), class: "btn btn-xl btn-info fa fa-print" %>

      <%= link_to " Excel Report ", cost_unit_wise_salary_salary_slip_ledgers_path(bank_id: @bank,year: @year,month: @month, cost_center: @category,format: "xls"), class: "btn btn-xl btn-success fa fa-print" %>
    <% else %>  
      <%= link_to " Print Salary Slip ", show_employee_salary_slip_ledgers_path(bank_id: @bank.id,year: @year,month: @month, category: @category,format: "pdf"), class: "btn btn-xl btn-info fa fa-print" %>

      <%= link_to " Excel Report ", show_employee_salary_slip_ledgers_path(bank_id: @bank.id,year: @year,month: @month, category: @category,format: "xls"), class: "btn btn-xl btn-success fa fa-print" %>
    <%end%>
  </div>
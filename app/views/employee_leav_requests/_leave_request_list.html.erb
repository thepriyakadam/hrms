<table id="example" class="table table-bordered table-hover table-condensed">
  <thead>
  <tr><th colspan="8"><center> Leave History</center></th></tr>
    <tr>
      <th>ID</th>
      <th>Leave Category</th>
      <th>Leave Type</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Days</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>

  <tbody>
    <% @employee_leav_requests.each do |employee_leav_request| %>
      <tr>
        <td><%= employee_leav_request.employee.try(:manual_employee_code)%>
        <td><%= employee_leav_request.leav_category.try(:code) %> - <%= employee_leav_request.leav_category.try(:name) %></td>
        <td><%= employee_leav_request.leave_type %></td>
        <td><%= employee_leav_request.start_date.to_date %></td>
        <td><%= employee_leav_request.end_date.to_date %></td>
        <td><%= employee_leav_request.leave_count %></td>
        <td>
          <% employee_leav_request.leave_status_records.try(:each) do |r| %>
            <% case r.status %>
              <% when "Pending" %>
                <small class="label label-default">Pending</small>
              <% when "FirstApproved" %>
                <small class="label label-primary">FirstApproved</small>
              <% when "FinalApproved" %>
                <small class="label label-success">FinalApproved</small>
              <% when "Rejected" %>
                <small class="label label-danger">Rejected</small>
              <% when "Cancelled" %>
                <small class="label label-warning">Cancelled</small>
              <% else %>
                <small class="label label-info">Else</small>
            <%end%>
          <%end%>
        </td>  
        <td>
          <% if employee_leav_request.current_status == "Pending" %>
            <%= link_to '', cancel_leave_status_record_path(employee_leav_request), data: { confirm: 'Are you sure?' },class: 'btn btn-danger btn-xs fa fa-trash' %>
          <% elsif employee_leav_request.current_status == "Cancelled" %>
            
          <% else %>
            <%= link_to 'Revert',show_leave_record_particular_leave_records_path(employee_leav_request), class: 'btn btn-danger btn-xs' %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<script type="text/javascript">
  $(document).ready(function() {
    $('#example').DataTable( {
        "lengthMenu": [[10, 25, 50,100, -1], [10, 25, 50,100, "All"]]
    } );
} );
</script>
exit
 gate_pass
exist.clear 
exist
 payable_day.to_f 
 payable_day.to_f + @b.to_f + 2
absent_day_count(exist).to_f
absent_day_count(exist).to_f + @b.to_f
present_day.to_f
present_day.to_f + @b.to_f + 2
 @b = @a.to_f/2
@a = gate_pass.to_f - 2
gate_pass <= 2
gate_pass
exit
exist.clear
present_day.to_f + gate_pass.to_f 
present_day.to_f
value: present_day.to_f + gate_pass.to_f 
 gate_pass <= 2
if gate_pass <= 2
absent_day_count(exist)
payable_day
gate_pass_count(exist)
 gate_pass
exit
 EmployeeAttendance.where("employee_id = ? AND day = ?",4607,@date.to_date)
 EmployeeAttendance.where("employee_id = ? AND day = ?",4607,@date)
 EmployeeAttendance.where("employee_id = ? AND strftime('%m/%Y', day) = ?",4607,@date.to_date)
 EmployeeAttendance.where("employee_id = ? AND strftime('%m/%Y', day) = ?",4607,@date)
 EmployeeAttendance.where("employee_id = ? AND strftime('%m', day) = ?",4607,@date.strftime('%M'))
@date
 EmployeeAttendance.where("employee_id = ? AND strftime('%m/%Y') = ?",4607,@date)
 EmployeeAttendance.where("employee_id = ? AND strftime('%m/%Y') = ?",4607)
 EmployeeAttendance.where(employee_id: 4607,is_confirm: false)
tp EmployeeAttendance.where("strftime('%m/%Y', day) = ? AND employee_id = ?", @date.strftime('%m/%Y'),4607)
tp EmployeeAttendance.where("strftime('%m/%Y', day.to_date) = ? AND employee_id = ?", @date.to_date,4607)
tp EmployeeAttendance.where("strftime('%m/%Y', day) = ? AND employee_id = ?", @date.strftime('%m/%Y'),4607)
tp EmployeeAttendance.where("strftime('%m/%Y', day) = ? AND employee_id = ?", @date.to_date,4607)
@date
tp EmployeeAttendance.where("strftime('%m/%Y', day) = ? AND employee_id = ?", @date,4607)
EmployeeAttendance.where("strftime('%m/%Y', day) = ? AND employee_id = ?", @date,4607)
 @employees
Workingday.create(work_data_structure)
work_data_structure
ork_data_structure
Workingday
exit
EmployeeAttendance.where(employee_id: 4606,month_name: 'November')
tp EmployeeAttendance.where(employee_id: 4606,day(%M): 'November')
tp EmployeeAttendance.where(employee_id: 4606,day(%m): 'November')
tp EmployeeAttendance.where(employee_id: 4606,month_name: 'November')
EmployeeAttendance.where(employee_id: 4606,month_name: 'November')
b=a.last
@emp1
Workingday.create(work_data_structure)
work_data_structure
params
@date
@attendances
@employees
exit
work_data_structure
tp a= Workingday.create(work_data_structure)
a= Workingday.create(work_data_structure)
tp b=a.last
b=a.last
tp  emp_attend
 emp_attend
@emp1
c
@salaryslips = Salaryslip.where('month = ? and year = ?', @month, @year).where(employee_id: @employees)
@employees = Employee.where(company_id: @company.to_i,company_location_id: @location.to_i).pluck(:id)
c
@year = params[:year]
@company = params[:company_id]
@location = params[:company_location_id]
@month = params[:month]
exit
tp @company_locations = CompanyLocation.where(company_id: @company.id)
@company_locations = CompanyLocation.where(company_id: @company.id)
exit
@location = params[:food_deduction][:company_location_id]
c
exit
@location = params[:monthly_expences][:company_location_id]
exit
@location = params[:monthly_expences][:company_location_id]
exit
@company = params[:esic][:company_id]
@location = params[:esic][:company_location_id]
c
@location = params[:company_location_id]
@location = params[:monthly_expences][:company_location_id]
exit
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_id)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_id,company_location_id: current_user.company_location_id)
@employees = Employee.where(company_id: current_user.company_id,company_location_id: current_user.company_location_id)0
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_id,company_location_id: current_user.company_location_id)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_id,company_location_id: current_user.company_location_id)
 @location = 1
 @location = params[:monthly_expences][:company_location_id]
c
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_id,company_location_id: current_user.company_location_id)
@location = 1
exit
@location = params[:monthly_expences][:company_location_id]
exit
@location = params[:monthly_expences][:company_location_id]
@company = params[:monthly_expences][:company_id]
exit
@employees = Employee.where(company_id: current_user.company_id)
@employees = Employee.where(company_id: current_user.company_location.company_id)
b = Employee.where(company_id: current_user.company_location.company_id)
a = Employee.where(company_id: current_user.company_id)
a.count
a = Employee.where(company_id: current_user.company_id)
@employees = Employee.where(company_id: current_user.company_location.company_id)
@employees = Employee.where(company_id: current_user.company_id)
@employees = Employee.where(company_id: current_user.company_location.company_id)
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_id)
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_location.company_id,company_location_id: current_user.company_location_id)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_location.company_id)
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_location.company_id)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_location.company_id)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m-%Y')).where(employee_id: @employees)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_location.company_id,company_location_id: current_user.company_location_id)
c
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)exit
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_location.company_id,company_location_id: current_user.company_location_id)
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_location.company_id)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: @company.to_i)
date = Date.new(@year.to_i, Workingday.months[@month])
exit
 @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees) @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
date.strftime('%m/%Y')
@employees = Employee.where(company_id: current_user.company_location.company_id,company_location_id: current_user.company_location_id)
date = Date.new(@year.to_i, Workingday.months[@month])
c
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
 date = Date.new(@year.to_i, Workingday.months[@month])
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_location.company_id,company_location_id: current_user.company_location_id).pluck(:id)
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: current_user.company_location.company_id,company_location_id: current_user.company_location_id)
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)@employees = Employee.where(company_id: current_user.company_location.company_id,company_location_id: current_user.company_location_id)
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
exit
tp @employees = Employee.where(company_id: current_user.company_location.company_id,company_location_id: current_user.company_location_id)
@employees = Employee.where(company_id: current_user.company_location.company_id,company_location_id: current_user.company_location_id)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
exit
tp @monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@monthly_expences = MonthlyExpence.where("strftime('%m/%Y', expence_date) = ?", date.strftime('%m/%Y')).where(employee_id: @employees)
@employees = Employee.where(company_id: 1)
date = Date.new(@year.to_i, Workingday.months[@month])
@location = params[:monthly_expences][:company_location_id]
@company = params[:monthly_expences][:company_id]
@year = params[:monthly_expences][:year]
@month = params[:monthly_expences][:month]
exit
exit\
c
current_user.company_location.company_id
current_user.company_location_id
current_user.company_id
exit
@salaryslips = Salaryslip.where(month: @month, year: @year.to_s).pluck(:employee_id)
emp_ids.count
emp_ids = @workingdays - @salaryslips
exit
@emp_id = WeekOffMaster.where.not(from: '2016-12-01').where.not(to: '2016-12-01').pluck(:employee_id)
 @employees = Employee.where(id: @emp_id)
@emp_id = WeekOffMaster.where.not(from: '2016-12-01').pluck(:employee_id)
@emp_id = WeekOffMaster.where(from: '2016-12-01').pluck(:employee_id)
@emp_id = WeekOffMaster.where.not(from: '2016-12-01').pluck(:employee_id)
e.from.to_date..e.to.to_date
for i in e.from.to_date..e.to.to_date
 @week_off_masters
exit
 @week_off_master.from.to_date..@week_off_master.to.to_date
@week_off_masters = WeekOffMaster.where(day: @day)
exit
tp @week_off_master
@week_off_master
\@week_off_master
tp  WeekOffMaster.where.not(to: '2016-12-11')
tp  WeekOffMaster.where.not(from: '2016-12-01')
@week_off_masters = WeekOffMaster.where.not(from: '2016-12-01')
@week_off_masters = WeekOffMaster.where.not(from: '2016-12-01').where.not(to: '2016-12-01').pluck(:employee_id)
@week_off_masters = WeekOffMaster.where.not(from: i).where.not(to: i).pluck(:employee_id)
if i ==  w.from
 for i in @week_off_master.from.to_date..@week_off_master.to.to_date
@week_off_master.to.to_date
@week_off_master.from.to_date
 week_off_masters = WeekOffMaster.where(day: @day)
exit
tp  WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ? AND week_off_masters.from.to_date) = ?", @day,@from)
tp  WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ? AND week_off_masters.from.strftime(%d/%m/%y)) = ?", @day,@from)
tp  WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ? AND week_off_masters.from.strftime(%d-%m-%y)) = ?", @day,@from)
tp  WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ? AND week_off_masters.from.strftime(%d-%m-%Y)) = ?", @day,@from)
tp  WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ? AND week_off_masters.from = ?", @day,@from.strftime('%y/%m/%d'))
tp  WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ? AND week_off_masters.from = ?", @day,@from.to_date)
tp  WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ? AND week_off_masters.from.to_date = ?", @day,@from)
tp  WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ?", @day)
tp  WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ? AND week_off_masters.from = ?", @day,@from)
 WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id").where.not("week_off_masters.day = ? AND week_off_masters.from = ?", @day,@from)
 WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id")
tp WeekOffMaster.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id")
tp Employee.joins("INNER JOIN employees ON employee.id = week_off_masters.employee_id")
tp Employee.joins("INNER JOIN employees ON employees.id = week_off_masters.employee_id")
tp WeekOffMaster.joins("INNER JOIN week_off_masters ON week_off_masters.employee_id = employees.id")
tp WeekOffMaster.joins("INNER JOIN week_off_masters ON week_off_masters.employee_id = employees.id").where.not("week_off_masters.day = ? AND week_off_masters.from.to_date = ? AND week_off_masters.to.to_date = ?",@day,@from.to_date,@to.to_date)
WeekOffMaster.joins("INNER JOIN week_off_masters ON week_off_masters.employee_id = employees.id").where.not("week_off_masters.day = ? AND week_off_masters.from.to_date = ? AND week_off_masters.to.to_date = ?",@day,@from.to_date,@to.to_date)
exit
@employees = Employee.where.not(id: @week_off_masters)
 @week_off_masters = WeekOffMaster.where(day: @day,from: a.strftime('%Y-%m-%d')).where(to: a.strftime('%Y-%m-%d')).pluck(:employee_id)
 @week_off_masters = WeekOffMaster.where(day: @day,from: a.strftime('%Y-%m-%d'),to: a.strftime('%Y-%m-%d')).pluck(:employee_id)
a.strftime('%Y-%m-%d')
a = @week_off_master.from
exit
for i in @week_off_master.from.to_date..@week_off_master.to.to_date;
for i in @week_off_master.from.to_date..@week_off_master.to.to_date
@week_off_master.from
@week_off_master.from.to_date
tp @week_off_masters = WeekOffMaster.where(day: @day,from: i,to: i).pluck(:employee_id)
@week_off_masters = WeekOffMaster.where(day: @day,from: i,to: i).pluck(:employee_id)
for i in @week_off_master.from.to_date..@week_off_master.to.to_date
@week_off_master.to.to_date
@week_off_master.@to.to_date
@week_off_master.to.to_date
@week_off_master.from.to_date
exit
 WeekOffMaster.where(day: @day,from: @from.to_date,to: @to.to_date)
 @employees = Employee.where.not(id: @week_off_masters).where(company_id: current_user.company_id)
@week_off_masters = WeekOffMaster.where(day: 'Sun',from: "2016-12-01",to: "2016-12-31")
